#region env

export XDG_CONFIG_HOME=~/.config
export XDG_CACHE_HOME=~/.cache
export XDG_DATA_HOME=~/.local/share
export XDG_RUNTIME_DIR=~/.xdg

fpath+=($ZDOTDIR/functions)

#endregion

#region history

setopt append_history          hist_ignore_all_dups    hist_verify         \
       extended_history        hist_ignore_dups        inc_append_history  \
       hist_expire_dups_first  hist_ignore_space       no_share_history    \
       hist_find_no_dups       hist_no_store                               \
       hist_save_no_dups       hist_reduce_blanks

HISTFILE=XDG_DATA_HOME/zsh/history
[[ -f $HISTFILE ]] || { mkdir -p $HISTFILE:h && touch $HISTFILE }
SAVEHIST=20000
HISTSIZE=100000

#endregion

#region directory

setopt auto_cd                 pushd_silent            multios        \
       auto_pushd              pushd_to_home           extended_glob  \
       pushd_ignore_dups       cdable_vars             no_clobber

alias -- -='cd -'
alias dirh='dirs -v'
for index ({1..9}) alias "$index"="cd +${index}"; unset index

#endregion

#region completions

setopt complete_in_word        auto_list               no_menu_complete  \
       always_to_end           auto_param_slash        no_flow_control   \
       auto_menu               extended_glob

ZSH_COMPDUMP=$XDG_CACHE_HOME/zsh/compdump
autoload -Uz compinit
_comp_files=($ZSH_COMPDUMP(Nmh-20))
if (( $#_comp_files )); then
  compinit -i -C -d $ZSH_COMPDUMP
else
  compinit -i -d $ZSH_COMPDUMP
  touch $ZSH_COMPDUMP
fi
unset _comp_files

#endregion

#region prompt

autoload -Uz promptinit && promptinit
prompt lite

#endregion
